(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{45:function(e,t,n){e.exports={wrapper:"MainPage_wrapper__WAaqP",controlWrapper:"MainPage_controlWrapper__27UOu",mapContainer:"MainPage_mapContainer__2nhOB"}},53:function(e,t,n){e.exports={wrapper:"AppContainer_wrapper__3HvJ6"}},60:function(e,t,n){e.exports=n(71)},70:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(31),i=n.n(c),o=n(14),l=n(15),s=n(17),u=n(16),d=n(18),p=n(56),m=n(20),f=n(53),b=n.n(f),O=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:b.a.wrapper},this.props.children)}}]),t}(a.Component),h=n(21),j=n(27),v=n(43),C=n(54),g=n.n(C),k=n(75),E=n(45),y=n.n(E),w=n(77),x=n(80),_=n(74),M=n(72),N=n(78),F=n(58),I=(n(76),n(40)),S=Object(_.a)(M.a),T=(Object(_.a)(N.a),function(e){return Object(M.a)(e)||Object(N.a)(e)}),P=Object(_.a)(T),A=(Object(_.a)(F.a),Object(I.a)(function(e){return e.toLowerCase().trim()}),"black"),L="green",W="yellow",z="red",D="violet",J="blue",U=n(8),B=n.n(U),R=[30,45],q=[A,L,W,z,D,J].reduce(function(e,t){return Object(j.a)({},e,Object(h.a)({},t,B.a.icon({iconUrl:"/icons/map-marker-".concat(t,".svg"),iconSize:R})))},{}),H=function(e){var t=function(e){return Object(M.a)(e)?A:e<5?L:e>=5&&e<15?W:e>=15&&e<30?z:D}(e);return q[t]},G=q[J],K=n(59),Q=n(55),V=n(79),X={cost:"\u0430\u0433\u0440\u0435\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u0437\u0430\u0442\u0440\u0430\u0442\u044b, \u043c\u0438\u043d\u0443\u0442",waitingTime:"\u0432\u0440\u0435\u043c\u044f \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u044f, \u043c\u0438\u043d\u0443\u0442",tripTimeInTheCabin:"\u0432\u0440\u0435\u043c\u044f \u0432 \u0441\u0430\u043b\u043e\u043d\u0435, \u043c\u0438\u043d\u0443\u0442",numberOfTransfers:"\u0447\u0438\u0441\u043b\u043e \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a",transferFee:"\u0448\u0442\u0440\u0430\u0444 \u0437\u0430 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438, \u043c\u0438\u043d\u0443\u0442"},Y=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.name,a=e.selected,c=Object(Q.a)(e,["id","name","selected"]);return r.a.createElement(V.a,null,r.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.a.createElement("span",null,"id: ".concat(t)),r.a.createElement("span",null,"\u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435: ".concat(n)),!a&&r.a.createElement(r.a.Fragment,null,Object.entries(X).map(function(e){var n=Object(K.a)(e,2),a=n[0],i=n[1],o=c[a];return T(o)?null:r.a.createElement("span",{key:"".concat(t,"_").concat(a)},"".concat(i,": ").concat(o))}))))}}]),t}(a.Component);Y.defaultProps={};var Z=n(73),$=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(e){return function(){n.props.handleMarkerClick&&n.props.handleMarkerClick(e)}},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.position,a=e.icon,c=e.children;return r.a.createElement(Z.a,{position:n,icon:a,onClick:this.handleClick(t)},c)}}]),t}(a.Component),ee=[55.772,37.606],te=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={sites:[],costs:{},selectedId:void 0},n.readFile=function(e){var t=new FileReader;P(e)&&(t.onloadend=function(){g.a.parse(e,{complete:function(t){console.log("Finished:",t.data);var a=t.data.filter(function(e){return e.every(function(e){return P(e)})});if("sites.csv"===e.name.toLowerCase()){var r=n.processSites(a);n.setState({sites:r})}else if("costs.csv"===e.name.toLowerCase()){var c=n.processCosts(a);n.setState({costs:c})}}})},t.readAsDataURL(e))},n.processSites=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=Object(v.a)(e),n=t[0],a=t.slice(1),r=n.indexOf("site_id"),c=n.indexOf("site_name"),i=n.indexOf("longitude"),o=n.indexOf("latitude");return a.map(function(e){return{id:Number(e[r]),name:e[c],longitude:Number(e[i]),latitude:Number(e[o])}})},n.processCosts=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=Object(v.a)(e),n=t[0],a=t.slice(1),r=n.indexOf("site_id_from"),c=n.indexOf("site_id_to"),i=n.indexOf("cost"),o=n.indexOf("iwait"),l=n.indexOf("inveht"),s=n.indexOf("xnum"),u=n.indexOf("xpen");return a.reduce(function(e,t){return Object(j.a)({},e,Object(h.a)({},t[r],Object(j.a)({},e[t[r]],Object(h.a)({},t[c],{cost:Number(t[i]),waitingTime:Number(t[o]),tripTimeInTheCabin:Number(t[l]),numberOfTransfers:Number(t[s]),transferFee:Number(t[u])}))))},{})},n.handleChange=function(e){var t=Object(v.a)(e.target.files).slice(0),a=t.find(function(e){return"sites.csv"===e.name}),r=t.find(function(e){return"costs.csv"===e.name});n.readFile(a),n.readFile(r)},n.handleMarkerClick=function(e){n.state.selectedId!==e&&n.setState({selectedId:e})},n.handleMapClick=function(){S(n.state.selectedId)&&n.setState({selectedId:void 0})},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.costs,a=t.sites,c=t.selectedId;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:y.a.controlWrapper},r.a.createElement("label",{htmlFor:"files",style:{textDecoration:"underline",cursor:"pointer"}},"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0444\u0430\u0439\u043b\u044b"),r.a.createElement("input",{id:"files",type:"file",onChange:this.handleChange,multiple:!0,style:{visibility:"hidden"},accept:".csv"}),P(a)&&r.a.createElement("span",null,"file sites uploaded"),P(n)&&r.a.createElement("span",null,"file costs uploaded")),r.a.createElement(w.a,{center:ee,zoom:14,className:y.a.mapContainer,onClick:this.handleMapClick},r.a.createElement(x.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.osm.org/{z}/{x}/{y}.png"}),a.map(function(t){var a=t.id,i=t.name,o=t.latitude,l=t.longitude,s=Object(k.a)({},[c,a],n),u=a===c,d=u?G:H(s.cost);return r.a.createElement($,{key:a,id:a,position:[o,l],selected:u,icon:d,handleMarkerClick:e.handleMarkerClick},r.a.createElement(Y,Object.assign({id:a,name:i,selected:u},s)))})))}}]),t}(a.Component);te.defaultProps={};var ne=function(){return r.a.createElement("div",null,"\u0414\u0430\u043d\u043d\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442")},ae=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(p.a,null,r.a.createElement(O,null,r.a.createElement(m.c,null,r.a.createElement(m.a,{exact:!0,path:"/",component:te}),r.a.createElement(m.a,{component:ne}))))}}]),t}(a.Component);n(69),n(70);i.a.render(r.a.createElement(ae,null),document.getElementById("root"))}},[[60,1,2]]]);
//# sourceMappingURL=main.c2e23988.chunk.js.map